import numpy as np

def make_pmf(x, remove_last=None):
    hist, bins = np.histogram(x, bins='auto', density=True)
    bins = bins[:-1] + (bins[1] - bins[0]) / 2.
    result = np.column_stack((bins, hist))
    # get rid of the last points
    if remove_last is not None:
        if len(bins) < 2 * remove_last:
            remove_last = len(bins) / 5
        result = result[result[:,1] > 0][:-remove_last]
    else:
        result = result[result[:,1] > 0]
    result[:,1] = -np.log(result[:,1])

    return result
